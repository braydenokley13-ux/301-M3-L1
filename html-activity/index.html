<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BOW Track 301 - Structural Leverage SIM</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Progress Bar -->
  <div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-brand">
        <span class="header-track">BOW ¬∑ TRACK 301</span>
        <h1 class="header-title">Structural Leverage SIM</h1>
      </div>
      <div class="header-progress" id="headerProgress">
        <span class="phase-indicator" data-phase="intro">Start</span>
        <span class="phase-indicator" data-phase="1">P1</span>
        <span class="phase-indicator" data-phase="2">P2</span>
        <span class="phase-indicator" data-phase="3">P3</span>
        <span class="phase-indicator" data-phase="4">P4</span>
        <span class="phase-indicator" data-phase="results">Results</span>
      </div>
    </div>
  </header>

  <main class="main-content">
    <!-- INTRO SCREEN -->
    <section class="phase-section active" id="phase-intro">
      <div class="container">
        <div class="intro-card">
          <div class="mission-badge">MISSION BRIEFING</div>
          <h2 class="intro-title">Structural Leverage Lab</h2>
          <p class="intro-subtitle">Leverage is alternatives, not arguments.</p>

          <div class="intro-content">
            <p>In this lab, you will analyze contract negotiations across the fictional <strong>Northshore League</strong>.</p>
            <p>You are <strong>NOT</strong> being asked to propose a deal, judge fairness, or guess salaries.</p>
            <p>Your job is to identify <strong>where leverage lives</strong> ‚Äî and how it shifts as the environment changes.</p>
          </div>

          <div class="phase-overview">
            <h3>Your Mission</h3>
            <div class="phase-list">
              <div class="phase-item">
                <span class="phase-num">1</span>
                <span class="phase-desc">Identify leverage holder</span>
              </div>
              <div class="phase-item">
                <span class="phase-num">2</span>
                <span class="phase-desc">Track shifts under updates</span>
              </div>
              <div class="phase-item">
                <span class="phase-num">3</span>
                <span class="phase-desc">Diagnose drivers (replaceability √ó dependence)</span>
              </div>
              <div class="phase-item">
                <span class="phase-num">4</span>
                <span class="phase-desc">Walk-away test</span>
              </div>
            </div>
          </div>

          <div class="identity-form">
            <h3>Analyst Identity</h3>
            <div class="form-group">
              <label for="studentName">Full Name</label>
              <input type="text" id="studentName" placeholder="Enter your full name" required>
            </div>
            <div class="form-group">
              <label for="studentEmail">Email</label>
              <input type="email" id="studentEmail" placeholder="Enter your email" required>
            </div>
          </div>

          <button class="btn btn-primary btn-large" id="startSim">
            Begin Simulation
            <span class="btn-arrow">‚Üí</span>
          </button>
        </div>
      </div>
    </section>

    <!-- PHASE 1: Initial Leverage Read -->
    <section class="phase-section" id="phase-1">
      <div class="container">
        <div class="phase-header">
          <span class="phase-badge">Phase 1</span>
          <h2>Initial Leverage Read</h2>
          <p class="phase-instruction">Identify who has leverage right now (Team / Player / Balanced).</p>
        </div>

        <!-- Harbor City -->
        <div class="team-card" data-team="harbor">
          <div class="team-header harbor">
            <h3 class="team-name">Harbor City</h3>
          </div>
          <div class="team-body">
            <div class="context-grid">
              <div class="context-section">
                <h4>Team Context</h4>
                <ul class="context-list">
                  <li><span class="context-label">Depth at position:</span> <span class="context-value positive">Deep</span></li>
                  <li><span class="context-label">Cap flexibility:</span> <span class="context-value positive">High</span></li>
                  <li><span class="context-label">Competitive urgency:</span> <span class="context-value neutral">Low</span></li>
                </ul>
              </div>
              <div class="context-section">
                <h4>Player Context</h4>
                <ul class="context-list">
                  <li><span class="context-label">Role:</span> <span class="context-value">Starter-level</span></li>
                  <li><span class="context-label">Outside interest:</span> <span class="context-value negative">None</span></li>
                </ul>
              </div>
              <div class="context-section">
                <h4>Timing</h4>
                <ul class="context-list">
                  <li><span class="context-label">Season stage:</span> <span class="context-value">Early</span></li>
                </ul>
              </div>
            </div>
            <div class="question-box">
              <label class="question-label">Who has leverage?</label>
              <div class="answer-options" data-question="p1-harbor">
                <button class="option-btn" data-value="Team">Team</button>
                <button class="option-btn" data-value="Player">Player</button>
                <button class="option-btn" data-value="Balanced">Balanced</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Ironclad -->
        <div class="team-card" data-team="ironclad">
          <div class="team-header ironclad">
            <h3 class="team-name">Ironclad</h3>
          </div>
          <div class="team-body">
            <div class="context-grid">
              <div class="context-section">
                <h4>Team Context</h4>
                <ul class="context-list">
                  <li><span class="context-label">Depth at position:</span> <span class="context-value negative">Thin (no viable replacement)</span></li>
                  <li><span class="context-label">Cap flexibility:</span> <span class="context-value neutral">Medium</span></li>
                  <li><span class="context-label">Competitive urgency:</span> <span class="context-value negative">High</span></li>
                </ul>
              </div>
              <div class="context-section">
                <h4>Player Context</h4>
                <ul class="context-list">
                  <li><span class="context-label">Role:</span> <span class="context-value">Starter-level</span></li>
                  <li><span class="context-label">Outside interest:</span> <span class="context-value positive">Strong (2 teams monitoring)</span></li>
                </ul>
              </div>
              <div class="context-section">
                <h4>Timing</h4>
                <ul class="context-list">
                  <li><span class="context-label">Season stage:</span> <span class="context-value">Mid</span></li>
                </ul>
              </div>
            </div>
            <div class="question-box">
              <label class="question-label">Who has leverage?</label>
              <div class="answer-options" data-question="p1-ironclad">
                <button class="option-btn" data-value="Team">Team</button>
                <button class="option-btn" data-value="Player">Player</button>
                <button class="option-btn" data-value="Balanced">Balanced</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Summit -->
        <div class="team-card" data-team="summit">
          <div class="team-header summit">
            <h3 class="team-name">Summit</h3>
          </div>
          <div class="team-body">
            <div class="context-grid">
              <div class="context-section">
                <h4>Team Context</h4>
                <ul class="context-list">
                  <li><span class="context-label">Depth at position:</span> <span class="context-value neutral">Medium (serviceable backup)</span></li>
                  <li><span class="context-label">Cap flexibility:</span> <span class="context-value neutral">Medium</span></li>
                  <li><span class="context-label">Competitive urgency:</span> <span class="context-value neutral">Medium</span></li>
                </ul>
              </div>
              <div class="context-section">
                <h4>Player Context</h4>
                <ul class="context-list">
                  <li><span class="context-label">Role:</span> <span class="context-value">Starter-level</span></li>
                  <li><span class="context-label">Outside interest:</span> <span class="context-value neutral">Limited</span></li>
                </ul>
              </div>
              <div class="context-section">
                <h4>Timing</h4>
                <ul class="context-list">
                  <li><span class="context-label">Season stage:</span> <span class="context-value">Mid</span></li>
                </ul>
              </div>
            </div>
            <div class="question-box">
              <label class="question-label">Who has leverage?</label>
              <div class="answer-options" data-question="p1-summit">
                <button class="option-btn" data-value="Team">Team</button>
                <button class="option-btn" data-value="Player">Player</button>
                <button class="option-btn" data-value="Balanced">Balanced</button>
              </div>
            </div>
          </div>
        </div>

        <div class="phase-nav">
          <button class="btn btn-secondary" id="backToIntro">‚Üê Back</button>
          <button class="btn btn-primary" id="toPhase2" disabled>Continue to Phase 2 ‚Üí</button>
        </div>
      </div>
    </section>

    <!-- PHASE 2: Leverage Shifts -->
    <section class="phase-section" id="phase-2">
      <div class="container">
        <div class="phase-header">
          <span class="phase-badge">Phase 2</span>
          <h2>Leverage Shifts</h2>
          <p class="phase-instruction">After each update, identify how leverage moved compared to Phase 1.</p>
          <p class="phase-hint">Focus on deadlines, outside options, and replaceability ‚Äî not fairness or talent.</p>
        </div>

        <!-- Update 1 -->
        <div class="update-card">
          <div class="update-header">
            <span class="update-badge">Update 1</span>
            <h3>Deadline Compresses</h3>
          </div>
          <div class="update-alert">
            <span class="alert-icon">‚ö°</span>
            <p><strong>League Update:</strong> The trade deadline is now two weeks away. Teams are beginning to lock in rosters.</p>
          </div>
          <div class="shift-questions">
            <div class="shift-row">
              <span class="team-label harbor-label">Harbor City</span>
              <div class="answer-options compact" data-question="p2-u1-harbor">
                <button class="option-btn" data-value="Shifted toward team">‚Üí Team</button>
                <button class="option-btn" data-value="Stayed the same">Same</button>
                <button class="option-btn" data-value="Shifted toward player">‚Üí Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="team-label ironclad-label">Ironclad</span>
              <div class="answer-options compact" data-question="p2-u1-ironclad">
                <button class="option-btn" data-value="Shifted toward team">‚Üí Team</button>
                <button class="option-btn" data-value="Stayed the same">Same</button>
                <button class="option-btn" data-value="Shifted toward player">‚Üí Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="team-label summit-label">Summit</span>
              <div class="answer-options compact" data-question="p2-u1-summit">
                <button class="option-btn" data-value="Shifted toward team">‚Üí Team</button>
                <button class="option-btn" data-value="Stayed the same">Same</button>
                <button class="option-btn" data-value="Shifted toward player">‚Üí Player</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Update 2 -->
        <div class="update-card">
          <div class="update-header">
            <span class="update-badge">Update 2</span>
            <h3>Market Thins</h3>
          </div>
          <div class="update-alert">
            <span class="alert-icon">üìâ</span>
            <p><strong>League Update:</strong> Two comparable free agents at this position have signed elsewhere.</p>
          </div>
          <div class="shift-questions">
            <div class="shift-row">
              <span class="team-label harbor-label">Harbor City</span>
              <div class="answer-options compact" data-question="p2-u2-harbor">
                <button class="option-btn" data-value="Shifted toward team">‚Üí Team</button>
                <button class="option-btn" data-value="Stayed the same">Same</button>
                <button class="option-btn" data-value="Shifted toward player">‚Üí Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="team-label ironclad-label">Ironclad</span>
              <div class="answer-options compact" data-question="p2-u2-ironclad">
                <button class="option-btn" data-value="Shifted toward team">‚Üí Team</button>
                <button class="option-btn" data-value="Stayed the same">Same</button>
                <button class="option-btn" data-value="Shifted toward player">‚Üí Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="team-label summit-label">Summit</span>
              <div class="answer-options compact" data-question="p2-u2-summit">
                <button class="option-btn" data-value="Shifted toward team">‚Üí Team</button>
                <button class="option-btn" data-value="Stayed the same">Same</button>
                <button class="option-btn" data-value="Shifted toward player">‚Üí Player</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Update 3 -->
        <div class="update-card">
          <div class="update-header">
            <span class="update-badge">Update 3</span>
            <h3>External Shock</h3>
          </div>
          <div class="update-alert">
            <span class="alert-icon">üö®</span>
            <p><strong>League Update:</strong> A contending team suffers an injury at this position and is now seeking a starter.</p>
          </div>
          <div class="shift-questions">
            <div class="shift-row">
              <span class="team-label harbor-label">Harbor City</span>
              <div class="answer-options compact" data-question="p2-u3-harbor">
                <button class="option-btn" data-value="Shifted toward team">‚Üí Team</button>
                <button class="option-btn" data-value="Stayed the same">Same</button>
                <button class="option-btn" data-value="Shifted toward player">‚Üí Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="team-label ironclad-label">Ironclad</span>
              <div class="answer-options compact" data-question="p2-u3-ironclad">
                <button class="option-btn" data-value="Shifted toward team">‚Üí Team</button>
                <button class="option-btn" data-value="Stayed the same">Same</button>
                <button class="option-btn" data-value="Shifted toward player">‚Üí Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="team-label summit-label">Summit</span>
              <div class="answer-options compact" data-question="p2-u3-summit">
                <button class="option-btn" data-value="Shifted toward team">‚Üí Team</button>
                <button class="option-btn" data-value="Stayed the same">Same</button>
                <button class="option-btn" data-value="Shifted toward player">‚Üí Player</button>
              </div>
            </div>
          </div>
        </div>

        <div class="phase-nav">
          <button class="btn btn-secondary" id="backToPhase1">‚Üê Back to Phase 1</button>
          <button class="btn btn-primary" id="toPhase3" disabled>Continue to Phase 3 ‚Üí</button>
        </div>
      </div>
    </section>

    <!-- PHASE 3: Drivers -->
    <section class="phase-section" id="phase-3">
      <div class="container">
        <div class="phase-header">
          <span class="phase-badge">Phase 3</span>
          <h2>What Drove the Shifts</h2>
          <p class="phase-instruction">Classify replaceability and dependence ‚Äî then infer leverage level.</p>
        </div>

        <div class="framework-box">
          <h4>Framework</h4>
          <p>Leverage moves when two things change:</p>
          <ul>
            <li>How easy you are to <strong>replace</strong> in the market</li>
            <li>How disruptive it is if you <strong>leave</strong> this team</li>
          </ul>
          <p>For each team's negotiation situation, classify the underlying drivers ‚Äî then infer overall leverage.</p>
        </div>

        <div class="matrix-container">
          <table class="driver-matrix">
            <thead>
              <tr>
                <th>Team / Player</th>
                <th>Market Replaceability</th>
                <th>Team Dependence</th>
                <th>Leverage Holder</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="team-cell harbor-label">Harbor City</td>
                <td>
                  <div class="answer-options matrix-options" data-question="p3-harbor-replace">
                    <button class="option-btn small" data-value="Deep">Deep</button>
                    <button class="option-btn small" data-value="Medium">Medium</button>
                    <button class="option-btn small" data-value="Thin">Thin</button>
                  </div>
                </td>
                <td>
                  <div class="answer-options matrix-options" data-question="p3-harbor-depend">
                    <button class="option-btn small" data-value="Low">Low</button>
                    <button class="option-btn small" data-value="Medium">Medium</button>
                    <button class="option-btn small" data-value="High">High</button>
                  </div>
                </td>
                <td>
                  <div class="answer-options matrix-options" data-question="p3-harbor-leverage">
                    <button class="option-btn small" data-value="Team">Team</button>
                    <button class="option-btn small" data-value="Player">Player</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="team-cell ironclad-label">Ironclad</td>
                <td>
                  <div class="answer-options matrix-options" data-question="p3-ironclad-replace">
                    <button class="option-btn small" data-value="Deep">Deep</button>
                    <button class="option-btn small" data-value="Medium">Medium</button>
                    <button class="option-btn small" data-value="Thin">Thin</button>
                  </div>
                </td>
                <td>
                  <div class="answer-options matrix-options" data-question="p3-ironclad-depend">
                    <button class="option-btn small" data-value="Low">Low</button>
                    <button class="option-btn small" data-value="Medium">Medium</button>
                    <button class="option-btn small" data-value="High">High</button>
                  </div>
                </td>
                <td>
                  <div class="answer-options matrix-options" data-question="p3-ironclad-leverage">
                    <button class="option-btn small" data-value="Team">Team</button>
                    <button class="option-btn small" data-value="Player">Player</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="team-cell summit-label">Summit</td>
                <td>
                  <div class="answer-options matrix-options" data-question="p3-summit-replace">
                    <button class="option-btn small" data-value="Deep">Deep</button>
                    <button class="option-btn small" data-value="Medium">Medium</button>
                    <button class="option-btn small" data-value="Thin">Thin</button>
                  </div>
                </td>
                <td>
                  <div class="answer-options matrix-options" data-question="p3-summit-depend">
                    <button class="option-btn small" data-value="Low">Low</button>
                    <button class="option-btn small" data-value="Medium">Medium</button>
                    <button class="option-btn small" data-value="High">High</button>
                  </div>
                </td>
                <td>
                  <div class="answer-options matrix-options" data-question="p3-summit-leverage">
                    <button class="option-btn small" data-value="Team">Team</button>
                    <button class="option-btn small" data-value="Player">Player</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="phase-nav">
          <button class="btn btn-secondary" id="backToPhase2">‚Üê Back to Phase 2</button>
          <button class="btn btn-primary" id="toPhase4" disabled>Continue to Phase 4 ‚Üí</button>
        </div>
      </div>
    </section>

    <!-- PHASE 4: Walk-Away Test -->
    <section class="phase-section" id="phase-4">
      <div class="container">
        <div class="phase-header">
          <span class="phase-badge">Phase 4</span>
          <h2>The Walk-Away Test</h2>
          <p class="phase-instruction">Answer the only question that matters: who can afford to say no?</p>
        </div>

        <div class="scenario-card">
          <div class="scenario-header">
            <span class="scenario-badge">Final Scenario</span>
            <h3>Summit Negotiation</h3>
          </div>
          <div class="scenario-body">
            <h4>Current Conditions:</h4>
            <ul class="scenario-conditions">
              <li>Season approaching midpoint</li>
              <li>Market thinning</li>
              <li>Summit has a serviceable replacement (performance would drop)</li>
              <li>Player has moderate external interest (not guaranteed offers)</li>
            </ul>
            <p class="scenario-note"><em>No new information will arrive before the deadline.</em></p>
          </div>
        </div>

        <div class="walkaway-questions">
          <div class="walkaway-question">
            <label class="question-label large">Who can afford to say no right now?</label>
            <div class="answer-options" data-question="p4-who">
              <button class="option-btn" data-value="Team">Team</button>
              <button class="option-btn" data-value="Player">Player</button>
              <button class="option-btn" data-value="Both">Both</button>
              <button class="option-btn" data-value="Neither">Neither</button>
            </div>
          </div>

          <div class="walkaway-question">
            <label class="question-label large">If they do say no, what happens?</label>
            <div class="answer-options" data-question="p4-consequence">
              <button class="option-btn" data-value="Minimal damage">Minimal damage</button>
              <button class="option-btn" data-value="Moderate setback">Moderate setback</button>
              <button class="option-btn" data-value="Severe disruption">Severe disruption</button>
            </div>
          </div>
        </div>

        <div class="phase-nav">
          <button class="btn btn-secondary" id="backToPhase3">‚Üê Back to Phase 3</button>
          <button class="btn btn-primary btn-submit" id="submitSim" disabled>
            Submit & Get Results
            <span class="btn-arrow">‚Üí</span>
          </button>
        </div>
      </div>
    </section>

    <!-- RESULTS DASHBOARD -->
    <section class="phase-section" id="phase-results">
      <div class="container">
        <div class="results-card">
          <div class="results-header">
            <h2>SIM OUTCOME</h2>
            <p class="results-subtitle">Structural Leverage</p>
          </div>

          <div class="analyst-info" id="analystInfo">
            <!-- Populated by JS -->
          </div>

          <div class="score-display">
            <div class="score-box">
              <span class="score-label">SCORE</span>
              <span class="score-value" id="scoreValue">--</span>
              <span class="score-total">/ 23</span>
            </div>
            <div class="tier-box" id="tierBox">
              <span class="tier-label">TIER</span>
              <span class="tier-value" id="tierValue">--</span>
              <span class="xp-value" id="xpValue">-- XP</span>
            </div>
          </div>

          <div class="claim-code-section">
            <h3>CLAIM CODE</h3>
            <div class="claim-code-box" id="claimCodeBox">
              <span class="claim-code" id="claimCode">--</span>
              <button class="copy-btn" id="copyCode" title="Copy to clipboard">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
              </button>
            </div>
            <p class="claim-code-note">Your claim code is deterministic. Same name/email + lesson + tier = same code.</p>
          </div>

          <div class="results-breakdown" id="resultsBreakdown">
            <!-- Populated by JS -->
          </div>

          <div class="tier-legend">
            <h4>Tier Meaning</h4>
            <div class="legend-item gold"><strong>GOLD:</strong> Accurate structural reads across shifting conditions.</div>
            <div class="legend-item silver"><strong>SILVER:</strong> Strong instincts; missed some subtle shifts.</div>
            <div class="legend-item bronze"><strong>BRONZE:</strong> Partial understanding; revisit BATNA and replaceability.</div>
            <div class="legend-item fail"><strong>NOT YET:</strong> Rewatch Lesson 1 and try again.</div>
          </div>

          <div class="results-actions">
            <button class="btn btn-secondary" id="reviewAnswers">Review Answers</button>
            <button class="btn btn-primary" id="restartSim">Try Again</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Toast notification -->
  <div class="toast" id="toast"></div>

  <script src="js/app.js"></script>
</body>
</html>
