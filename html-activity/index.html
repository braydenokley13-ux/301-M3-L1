<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Structural Leverage SIM | BOW Track 301</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app">
    <!-- Progress -->
    <div class="progress-track">
      <div class="progress-fill" id="progressFill"></div>
    </div>

    <!-- Nav -->
    <nav class="nav">
      <div class="nav-brand">
        <span class="nav-tag">BOW 301</span>
        <span class="nav-title">Structural Leverage</span>
      </div>
      <div class="nav-steps">
        <span class="step active" data-phase="intro">Start</span>
        <span class="step" data-phase="1">1</span>
        <span class="step" data-phase="2">2</span>
        <span class="step" data-phase="3">3</span>
        <span class="step" data-phase="4">4</span>
        <span class="step" data-phase="results">Done</span>
      </div>
    </nav>

    <!-- INTRO -->
    <section class="screen active" id="phase-intro">
      <div class="wrap">
        <div class="intro">
          <div class="intro-badge">NBA Free Agency Simulation</div>
          <h1>Structural Leverage Lab</h1>
          <p class="intro-tagline">Leverage is alternatives, not arguments.</p>

          <div class="intro-brief">
            <p>You'll analyze <strong>three real NBA contract negotiations</strong> during the 2024 offseason.</p>
            <p>Your job: identify <strong>where leverage lives</strong> and how it shifts as conditions change.</p>
          </div>

          <div class="mission-steps">
            <div class="mission-step">
              <div class="mission-num">1</div>
              <div class="mission-text">Read the initial leverage</div>
            </div>
            <div class="mission-step">
              <div class="mission-num">2</div>
              <div class="mission-text">Track shifts as news breaks</div>
            </div>
            <div class="mission-step">
              <div class="mission-num">3</div>
              <div class="mission-text">Diagnose the drivers</div>
            </div>
            <div class="mission-step">
              <div class="mission-num">4</div>
              <div class="mission-text">Run the walk-away test</div>
            </div>
          </div>

          <div class="identity-section">
            <h3>Enter Your Info</h3>
            <div class="input-row">
              <input type="text" id="studentName" placeholder="Full Name" required>
              <input type="email" id="studentEmail" placeholder="Email" required>
            </div>
          </div>

          <button class="btn-primary" id="startSim">
            Start Simulation
          </button>
        </div>
      </div>
    </section>

    <!-- PHASE 1 -->
    <section class="screen" id="phase-1">
      <div class="wrap">
        <div class="phase-head">
          <span class="phase-tag">Phase 1 of 4</span>
          <h2>Initial Leverage Read</h2>
          <p>Who has leverage in each negotiation right now?</p>
        </div>

        <!-- Lakers -->
        <div class="team-card lakers">
          <div class="team-top">
            <div class="team-logo">LAL</div>
            <div class="team-info">
              <h3>Los Angeles Lakers</h3>
              <span class="team-situation">Negotiating with a starting wing</span>
            </div>
          </div>
          <div class="team-context">
            <div class="context-col">
              <h4>Team Situation</h4>
              <div class="context-item">
                <span class="label">Roster Depth</span>
                <span class="value good">Deep â€” multiple options at position</span>
              </div>
              <div class="context-item">
                <span class="label">Cap Space</span>
                <span class="value good">$18M under luxury tax</span>
              </div>
              <div class="context-item">
                <span class="label">Urgency</span>
                <span class="value neutral">Low â€” competitive but not desperate</span>
              </div>
            </div>
            <div class="context-col">
              <h4>Player Situation</h4>
              <div class="context-item">
                <span class="label">Role</span>
                <span class="value">Solid starter, not a star</span>
              </div>
              <div class="context-item">
                <span class="label">Market Interest</span>
                <span class="value bad">None â€” no other teams calling</span>
              </div>
              <div class="context-item">
                <span class="label">Timeline</span>
                <span class="value">Early free agency</span>
              </div>
            </div>
          </div>
          <div class="team-question">
            <span class="q-label">Who has leverage?</span>
            <div class="options" data-question="p1-lakers">
              <button class="opt" data-value="Team">Team</button>
              <button class="opt" data-value="Player">Player</button>
              <button class="opt" data-value="Balanced">Balanced</button>
            </div>
          </div>
        </div>

        <!-- Suns -->
        <div class="team-card suns">
          <div class="team-top">
            <div class="team-logo">PHX</div>
            <div class="team-info">
              <h3>Phoenix Suns</h3>
              <span class="team-situation">Negotiating with their starting point guard</span>
            </div>
          </div>
          <div class="team-context">
            <div class="context-col">
              <h4>Team Situation</h4>
              <div class="context-item">
                <span class="label">Roster Depth</span>
                <span class="value bad">Thin â€” no viable replacement on roster</span>
              </div>
              <div class="context-item">
                <span class="label">Cap Space</span>
                <span class="value neutral">$8M available (limited)</span>
              </div>
              <div class="context-item">
                <span class="label">Urgency</span>
                <span class="value bad">High â€” championship window closing</span>
              </div>
            </div>
            <div class="context-col">
              <h4>Player Situation</h4>
              <div class="context-item">
                <span class="label">Role</span>
                <span class="value">Starting PG, key piece</span>
              </div>
              <div class="context-item">
                <span class="label">Market Interest</span>
                <span class="value good">Strong â€” Heat & Rockets interested</span>
              </div>
              <div class="context-item">
                <span class="label">Timeline</span>
                <span class="value">Mid free agency</span>
              </div>
            </div>
          </div>
          <div class="team-question">
            <span class="q-label">Who has leverage?</span>
            <div class="options" data-question="p1-suns">
              <button class="opt" data-value="Team">Team</button>
              <button class="opt" data-value="Player">Player</button>
              <button class="opt" data-value="Balanced">Balanced</button>
            </div>
          </div>
        </div>

        <!-- Nuggets -->
        <div class="team-card nuggets">
          <div class="team-top">
            <div class="team-logo">DEN</div>
            <div class="team-info">
              <h3>Denver Nuggets</h3>
              <span class="team-situation">Negotiating with a rotation big man</span>
            </div>
          </div>
          <div class="team-context">
            <div class="context-col">
              <h4>Team Situation</h4>
              <div class="context-item">
                <span class="label">Roster Depth</span>
                <span class="value neutral">Medium â€” serviceable backup available</span>
              </div>
              <div class="context-item">
                <span class="label">Cap Space</span>
                <span class="value neutral">$12M available</span>
              </div>
              <div class="context-item">
                <span class="label">Urgency</span>
                <span class="value neutral">Medium â€” defending champs, want continuity</span>
              </div>
            </div>
            <div class="context-col">
              <h4>Player Situation</h4>
              <div class="context-item">
                <span class="label">Role</span>
                <span class="value">Key rotation player</span>
              </div>
              <div class="context-item">
                <span class="label">Market Interest</span>
                <span class="value neutral">Limited â€” 1-2 teams monitoring</span>
              </div>
              <div class="context-item">
                <span class="label">Timeline</span>
                <span class="value">Mid free agency</span>
              </div>
            </div>
          </div>
          <div class="team-question">
            <span class="q-label">Who has leverage?</span>
            <div class="options" data-question="p1-nuggets">
              <button class="opt" data-value="Team">Team</button>
              <button class="opt" data-value="Player">Player</button>
              <button class="opt" data-value="Balanced">Balanced</button>
            </div>
          </div>
        </div>

        <div class="nav-buttons">
          <button class="btn-secondary" id="backToIntro">Back</button>
          <button class="btn-primary" id="toPhase2" disabled>Continue</button>
        </div>
      </div>
    </section>

    <!-- PHASE 2 -->
    <section class="screen" id="phase-2">
      <div class="wrap">
        <div class="phase-head">
          <span class="phase-tag">Phase 2 of 4</span>
          <h2>Leverage Shifts</h2>
          <p>Breaking news changes the landscape. How does leverage shift vs. Phase 1?</p>
        </div>

        <!-- Update 1 -->
        <div class="update-block">
          <div class="update-header">
            <span class="update-num">Update 1</span>
            <h3>Deadline Approaches</h3>
          </div>
          <div class="update-news">
            <span class="news-icon">ðŸ“…</span>
            <p><strong>ESPN:</strong> Free agency moratorium ends in 48 hours. Teams are finalizing rosters.</p>
          </div>
          <div class="shift-grid">
            <div class="shift-row">
              <span class="shift-team lakers-text">Lakers</span>
              <div class="options compact" data-question="p2-u1-lakers">
                <button class="opt" data-value="Shifted toward team">â†’ Team</button>
                <button class="opt" data-value="Stayed the same">Same</button>
                <button class="opt" data-value="Shifted toward player">â†’ Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="shift-team suns-text">Suns</span>
              <div class="options compact" data-question="p2-u1-suns">
                <button class="opt" data-value="Shifted toward team">â†’ Team</button>
                <button class="opt" data-value="Stayed the same">Same</button>
                <button class="opt" data-value="Shifted toward player">â†’ Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="shift-team nuggets-text">Nuggets</span>
              <div class="options compact" data-question="p2-u1-nuggets">
                <button class="opt" data-value="Shifted toward team">â†’ Team</button>
                <button class="opt" data-value="Stayed the same">Same</button>
                <button class="opt" data-value="Shifted toward player">â†’ Player</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Update 2 -->
        <div class="update-block">
          <div class="update-header">
            <span class="update-num">Update 2</span>
            <h3>Market Thins</h3>
          </div>
          <div class="update-news">
            <span class="news-icon">ðŸ“‰</span>
            <p><strong>Woj:</strong> Two comparable free agents have signed elsewhere. The market at this position is drying up.</p>
          </div>
          <div class="shift-grid">
            <div class="shift-row">
              <span class="shift-team lakers-text">Lakers</span>
              <div class="options compact" data-question="p2-u2-lakers">
                <button class="opt" data-value="Shifted toward team">â†’ Team</button>
                <button class="opt" data-value="Stayed the same">Same</button>
                <button class="opt" data-value="Shifted toward player">â†’ Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="shift-team suns-text">Suns</span>
              <div class="options compact" data-question="p2-u2-suns">
                <button class="opt" data-value="Shifted toward team">â†’ Team</button>
                <button class="opt" data-value="Stayed the same">Same</button>
                <button class="opt" data-value="Shifted toward player">â†’ Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="shift-team nuggets-text">Nuggets</span>
              <div class="options compact" data-question="p2-u2-nuggets">
                <button class="opt" data-value="Shifted toward team">â†’ Team</button>
                <button class="opt" data-value="Stayed the same">Same</button>
                <button class="opt" data-value="Shifted toward player">â†’ Player</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Update 3 -->
        <div class="update-block">
          <div class="update-header">
            <span class="update-num">Update 3</span>
            <h3>Injury News</h3>
          </div>
          <div class="update-news">
            <span class="news-icon">ðŸš¨</span>
            <p><strong>Shams:</strong> A contending team just lost their starter to a torn ACL. They're now aggressively pursuing options.</p>
          </div>
          <div class="shift-grid">
            <div class="shift-row">
              <span class="shift-team lakers-text">Lakers</span>
              <div class="options compact" data-question="p2-u3-lakers">
                <button class="opt" data-value="Shifted toward team">â†’ Team</button>
                <button class="opt" data-value="Stayed the same">Same</button>
                <button class="opt" data-value="Shifted toward player">â†’ Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="shift-team suns-text">Suns</span>
              <div class="options compact" data-question="p2-u3-suns">
                <button class="opt" data-value="Shifted toward team">â†’ Team</button>
                <button class="opt" data-value="Stayed the same">Same</button>
                <button class="opt" data-value="Shifted toward player">â†’ Player</button>
              </div>
            </div>
            <div class="shift-row">
              <span class="shift-team nuggets-text">Nuggets</span>
              <div class="options compact" data-question="p2-u3-nuggets">
                <button class="opt" data-value="Shifted toward team">â†’ Team</button>
                <button class="opt" data-value="Stayed the same">Same</button>
                <button class="opt" data-value="Shifted toward player">â†’ Player</button>
              </div>
            </div>
          </div>
        </div>

        <div class="nav-buttons">
          <button class="btn-secondary" id="backToPhase1">Back</button>
          <button class="btn-primary" id="toPhase3" disabled>Continue</button>
        </div>
      </div>
    </section>

    <!-- PHASE 3 -->
    <section class="screen" id="phase-3">
      <div class="wrap">
        <div class="phase-head">
          <span class="phase-tag">Phase 3 of 4</span>
          <h2>Diagnose the Drivers</h2>
          <p>What's actually causing these leverage positions?</p>
        </div>

        <div class="framework">
          <h4>The Leverage Formula</h4>
          <p>Leverage = f(Replaceability, Dependence)</p>
          <ul>
            <li><strong>Replaceability:</strong> How easy is it to find an alternative in the market?</li>
            <li><strong>Dependence:</strong> How much does the team need this specific player?</li>
          </ul>
        </div>

        <div class="matrix-wrap">
          <table class="matrix">
            <thead>
              <tr>
                <th>Team</th>
                <th>Market Replaceability</th>
                <th>Team Dependence</th>
                <th>Leverage Holder</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="team-cell lakers-text">Lakers</td>
                <td>
                  <div class="options mini" data-question="p3-lakers-replace">
                    <button class="opt" data-value="Deep">Deep</button>
                    <button class="opt" data-value="Medium">Medium</button>
                    <button class="opt" data-value="Thin">Thin</button>
                  </div>
                </td>
                <td>
                  <div class="options mini" data-question="p3-lakers-depend">
                    <button class="opt" data-value="Low">Low</button>
                    <button class="opt" data-value="Medium">Medium</button>
                    <button class="opt" data-value="High">High</button>
                  </div>
                </td>
                <td>
                  <div class="options mini" data-question="p3-lakers-leverage">
                    <button class="opt" data-value="Team">Team</button>
                    <button class="opt" data-value="Player">Player</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="team-cell suns-text">Suns</td>
                <td>
                  <div class="options mini" data-question="p3-suns-replace">
                    <button class="opt" data-value="Deep">Deep</button>
                    <button class="opt" data-value="Medium">Medium</button>
                    <button class="opt" data-value="Thin">Thin</button>
                  </div>
                </td>
                <td>
                  <div class="options mini" data-question="p3-suns-depend">
                    <button class="opt" data-value="Low">Low</button>
                    <button class="opt" data-value="Medium">Medium</button>
                    <button class="opt" data-value="High">High</button>
                  </div>
                </td>
                <td>
                  <div class="options mini" data-question="p3-suns-leverage">
                    <button class="opt" data-value="Team">Team</button>
                    <button class="opt" data-value="Player">Player</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="team-cell nuggets-text">Nuggets</td>
                <td>
                  <div class="options mini" data-question="p3-nuggets-replace">
                    <button class="opt" data-value="Deep">Deep</button>
                    <button class="opt" data-value="Medium">Medium</button>
                    <button class="opt" data-value="Thin">Thin</button>
                  </div>
                </td>
                <td>
                  <div class="options mini" data-question="p3-nuggets-depend">
                    <button class="opt" data-value="Low">Low</button>
                    <button class="opt" data-value="Medium">Medium</button>
                    <button class="opt" data-value="High">High</button>
                  </div>
                </td>
                <td>
                  <div class="options mini" data-question="p3-nuggets-leverage">
                    <button class="opt" data-value="Team">Team</button>
                    <button class="opt" data-value="Player">Player</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="nav-buttons">
          <button class="btn-secondary" id="backToPhase2">Back</button>
          <button class="btn-primary" id="toPhase4" disabled>Continue</button>
        </div>
      </div>
    </section>

    <!-- PHASE 4 -->
    <section class="screen" id="phase-4">
      <div class="wrap">
        <div class="phase-head">
          <span class="phase-tag">Phase 4 of 4</span>
          <h2>The Walk-Away Test</h2>
          <p>The only question that matters: who can afford to say no?</p>
        </div>

        <div class="scenario">
          <div class="scenario-head">
            <div class="team-logo">DEN</div>
            <div>
              <h3>Final Scenario: Nuggets Negotiation</h3>
              <span>Current state after all updates</span>
            </div>
          </div>
          <div class="scenario-facts">
            <div class="fact">Free agency entering final 48 hours</div>
            <div class="fact">Market has thinned significantly</div>
            <div class="fact">Nuggets have a serviceable backup (performance would drop)</div>
            <div class="fact">Player has moderate interest from one other team (not guaranteed)</div>
          </div>
          <p class="scenario-note">No new information will arrive before the deadline.</p>
        </div>

        <div class="final-questions">
          <div class="final-q">
            <h4>Who can afford to walk away right now?</h4>
            <div class="options" data-question="p4-who">
              <button class="opt" data-value="Team">Team</button>
              <button class="opt" data-value="Player">Player</button>
              <button class="opt" data-value="Both">Both</button>
              <button class="opt" data-value="Neither">Neither</button>
            </div>
          </div>

          <div class="final-q">
            <h4>If the team walks away, what's the damage?</h4>
            <div class="options" data-question="p4-consequence">
              <button class="opt" data-value="Minimal damage">Minimal</button>
              <button class="opt" data-value="Moderate setback">Moderate</button>
              <button class="opt" data-value="Severe disruption">Severe</button>
            </div>
          </div>
        </div>

        <div class="nav-buttons">
          <button class="btn-secondary" id="backToPhase3">Back</button>
          <button class="btn-primary" id="submitSim" disabled>Submit</button>
        </div>
      </div>
    </section>

    <!-- RESULTS -->
    <section class="screen" id="phase-results">
      <div class="wrap">
        <div class="results">
          <div class="results-top">
            <h2>Simulation Complete</h2>
            <p id="analystInfo"></p>
          </div>

          <div class="score-row">
            <div class="score-card">
              <span class="score-label">Score</span>
              <div class="score-big">
                <span id="scoreValue">--</span>
                <span class="score-max">/23</span>
              </div>
            </div>
            <div class="tier-card" id="tierBox">
              <span class="tier-label">Tier</span>
              <span class="tier-badge" id="tierValue">--</span>
              <span class="tier-xp" id="xpValue">-- XP</span>
            </div>
          </div>

          <div class="claim-section">
            <h3>Your Claim Code</h3>
            <div class="claim-box">
              <code id="claimCode">--</code>
              <button class="copy-btn" id="copyCode">Copy</button>
            </div>
            <p class="claim-note">This code is the same for everyone at your tier.</p>
          </div>

          <div class="breakdown" id="resultsBreakdown"></div>

          <div class="tier-info">
            <div class="tier-row gold-row"><strong>GOLD (21+):</strong> Accurate structural reads across shifting conditions.</div>
            <div class="tier-row silver-row"><strong>SILVER (17-20):</strong> Strong instincts; missed some subtle shifts.</div>
            <div class="tier-row bronze-row"><strong>BRONZE (13-16):</strong> Partial understanding; revisit BATNA and replaceability.</div>
            <div class="tier-row fail-row"><strong>NOT YET (&lt;13):</strong> Review the lesson and try again.</div>
          </div>

          <div class="results-actions">
            <button class="btn-secondary" id="reviewAnswers">Review Answers</button>
            <button class="btn-primary" id="restartSim">Try Again</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="toast" id="toast"></div>

  <script src="js/app.js"></script>
</body>
</html>
